<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº”å­æ£‹æ¸¸æˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #f1f1f1;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background-color: rgba(30, 30, 46, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            padding: 30px;
            margin-top: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ff9a9e, #fad0c4, #fad0c4, #a18cd1);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: #aaa;
            margin-bottom: 20px;
        }
        
        .game-area {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
        }
        
        .game-info {
            flex: 1;
            min-width: 250px;
            background: rgba(40, 40, 60, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);
        }
        
        .current-player {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        
        .player-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.5rem;
        }
        
        .black-player {
            background-color: #333;
            color: white;
        }
        
        .white-player {
            background-color: #f1f1f1;
            color: #333;
        }
        
        .current-player-text {
            font-size: 1.4rem;
            font-weight: bold;
        }
        
        .status {
            font-size: 1.2rem;
            text-align: center;
            padding: 15px;
            margin-bottom: 25px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .btn {
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn-restart {
            background: linear-gradient(to right, #ff416c, #ff4b2b);
            color: white;
        }
        
        .btn-undo {
            background: linear-gradient(to right, #2193b0, #6dd5ed);
            color: white;
        }
        
        .rules {
            margin-top: 25px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .rules h3 {
            margin-bottom: 10px;
            color: #ffcc00;
        }
        
        .board-container {
            flex: 1;
            min-width: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .board {
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            grid-template-rows: repeat(15, 1fr);
            width: 100%;
            max-width: 500px;
            aspect-ratio: 1 / 1;
            background-color: #dcb35c;
            border: 3px solid #8b4513;
            border-radius: 5px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
            position: relative;
            margin-bottom: 20px;
        }
        
        .cell {
            border-right: 1px solid #8b4513;
            border-bottom: 1px solid #8b4513;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
        }
        
        .cell:hover {
            background-color: rgba(139, 69, 19, 0.1);
        }
        
        .cell:last-child {
            border-right: none;
        }
        
        .row:last-child .cell {
            border-bottom: none;
        }
        
        /* æ£‹ç›˜ä¸Šçš„æ ‡è®°ç‚¹ */
        .cell.mark::before {
            content: '';
            width: 8px;
            height: 8px;
            background-color: #333;
            border-radius: 50%;
            position: absolute;
        }
        
        /* æ£‹å­æ ·å¼ */
        .piece {
            width: 85%;
            height: 85%;
            border-radius: 50%;
            position: relative;
            box-shadow: inset 0 -5px 5px rgba(0, 0, 0, 0.2),
                        0 3px 5px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
        }
        
        .black-piece {
            background: radial-gradient(circle at 30% 30%, #555, #000);
        }
        
        .white-piece {
            background: radial-gradient(circle at 30% 30%, #fff, #ccc);
        }
        
        .win-piece {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 215, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
        }
        
        footer {
            margin-top: 30px;
            text-align: center;
            color: #aaa;
            font-size: 0.9rem;
            padding: 20px;
            width: 100%;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
            }
            
            .board-container {
                min-width: 100%;
            }
            
            .board {
                max-width: 100%;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-chess-board"></i> äº”å­æ£‹æ¸¸æˆ</h1>
        <p class="subtitle">é»‘æ£‹ä¸ç™½æ£‹è½®æµè½å­ï¼Œå…ˆå½¢æˆäº”å­è¿çº¿è€…è·èƒœ</p>
    </header>
    
    <div class="container">
        <div class="game-area">
            <div class="game-info">
                <div class="current-player">
                    <div class="player-icon black-player">
                        <i class="fas fa-circle"></i>
                    </div>
                    <div class="current-player-text">å½“å‰ç©å®¶: é»‘æ£‹</div>
                </div>
                
                <div class="status" id="status">
                    æ¸¸æˆå¼€å§‹ï¼é»‘æ£‹å…ˆè¡Œ
                </div>
                
                <div class="controls">
                    <button class="btn btn-restart" id="restartBtn">
                        <i class="fas fa-redo"></i> é‡æ–°å¼€å§‹æ¸¸æˆ
                    </button>
                    <button class="btn btn-undo" id="undoBtn">
                        <i class="fas fa-undo"></i> æ‚”æ£‹ï¼ˆä¸Šä¸€æ­¥ï¼‰
                    </button>
                </div>
                
                <div class="rules">
                    <h3><i class="fas fa-info-circle"></i> æ¸¸æˆè§„åˆ™</h3>
                    <p>1. é»‘æ£‹å…ˆè¡Œï¼ŒåŒæ–¹è½®æµåœ¨æ£‹ç›˜ä¸Šæ”¾ç½®æ£‹å­</p>
                    <p>2. å…ˆåœ¨æ¨ªã€ç«–æˆ–æ–œæ–¹å‘è¿æˆäº”å­çš„ä¸€æ–¹è·èƒœ</p>
                    <p>3. æ£‹ç›˜å¤§å°ä¸º15Ã—15ï¼Œæ£‹å­è½åœ¨äº¤å‰ç‚¹ä¸Š</p>
                    <p>4. å¦‚æœæ£‹ç›˜ä¸‹æ»¡ä»æœªåˆ†èƒœè´Ÿï¼Œåˆ™ä¸ºå¹³å±€</p>
                </div>
            </div>
            
            <div class="board-container">
                <div class="board" id="board"></div>
                <p>ç‚¹å‡»æ£‹ç›˜äº¤å‰ç‚¹æ”¾ç½®æ£‹å­</p>
            </div>
        </div>
    </div>
    
    <footer>
        <p>äº”å­æ£‹æ¸¸æˆ | ä½¿ç”¨HTML5, CSS3å’ŒJavaScriptå¼€å‘ | æ¸¸æˆå¼€å‘ä¸“å®¶</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // æ¸¸æˆçŠ¶æ€å˜é‡
            const boardSize = 15;
            let board = [];
            let currentPlayer = 'black'; // 'black' æˆ– 'white'
            let gameOver = false;
            let moveHistory = [];
            
            // DOMå…ƒç´ 
            const boardElement = document.getElementById('board');
            const statusElement = document.getElementById('status');
            const restartBtn = document.getElementById('restartBtn');
            const undoBtn = document.getElementById('undoBtn');
            const currentPlayerElement = document.querySelector('.current-player');
            const playerIcon = document.querySelector('.player-icon');
            
            // åˆå§‹åŒ–æ£‹ç›˜
            function initBoard() {
                board = [];
                boardElement.innerHTML = '';
                moveHistory = [];
                gameOver = false;
                currentPlayer = 'black';
                
                // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
                updateStatus();
                
                // åˆ›å»ºæ£‹ç›˜æ ¼å­
                for (let row = 0; row < boardSize; row++) {
                    board[row] = [];
                    for (let col = 0; col < boardSize; col++) {
                        board[row][col] = null;
                        
                        const cell = document.createElement('div');
                        cell.className = 'cell';
                        cell.dataset.row = row;
                        cell.dataset.col = col;
                        
                        // æ·»åŠ æ£‹ç›˜æ ‡è®°ç‚¹ï¼ˆå¤©å…ƒå’Œå››æ˜Ÿï¼‰
                        if ((row === 3 && col === 3) || (row === 3 && col === 11) || 
                            (row === 7 && col === 7) || 
                            (row === 11 && col === 3) || (row === 11 && col === 11)) {
                            cell.classList.add('mark');
                        }
                        
                        cell.addEventListener('click', () => makeMove(row, col));
                        boardElement.appendChild(cell);
                    }
                }
            }
            
            // æ›´æ–°æ¸¸æˆçŠ¶æ€æ˜¾ç¤º
            function updateStatus() {
                if (gameOver) return;
                
                statusElement.textContent = `å½“å‰ç©å®¶: ${currentPlayer === 'black' ? 'é»‘æ£‹' : 'ç™½æ£‹'}`;
                
                // æ›´æ–°å½“å‰ç©å®¶æŒ‡ç¤ºå™¨
                if (currentPlayer === 'black') {
                    playerIcon.className = 'player-icon black-player';
                    playerIcon.innerHTML = '<i class="fas fa-circle"></i>';
                    currentPlayerElement.querySelector('.current-player-text').textContent = 'å½“å‰ç©å®¶: é»‘æ£‹';
                } else {
                    playerIcon.className = 'player-icon white-player';
                    playerIcon.innerHTML = '<i class="fas fa-circle"></i>';
                    currentPlayerElement.querySelector('.current-player-text').textContent = 'å½“å‰ç©å®¶: ç™½æ£‹';
                }
            }
            
            // è½å­
            function makeMove(row, col) {
                // å¦‚æœæ¸¸æˆç»“æŸæˆ–è¯¥ä½ç½®å·²æœ‰æ£‹å­ï¼Œåˆ™ä¸èƒ½è½å­
                if (gameOver || board[row][col] !== null) return;
                
                // è®°å½•è¿™ä¸€æ­¥
                moveHistory.push({row, col, player: currentPlayer});
                
                // åœ¨æ£‹ç›˜ä¸Šæ”¾ç½®æ£‹å­
                board[row][col] = currentPlayer;
                
                // æ›´æ–°æ£‹ç›˜æ˜¾ç¤º
                const cell = document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`);
                const piece = document.createElement('div');
                piece.className = `piece ${currentPlayer}-piece`;
                cell.appendChild(piece);
                
                // æ£€æŸ¥æ˜¯å¦è·èƒœ
                if (checkWin(row, col)) {
                    gameOver = true;
                    // é«˜äº®æ˜¾ç¤ºè·èƒœçš„æ£‹å­
                    highlightWinningPieces();
                    statusElement.innerHTML = `<span style="color: #ffcc00; font-weight: bold;">ğŸ‰ ${currentPlayer === 'black' ? 'é»‘æ£‹' : 'ç™½æ£‹'} è·èƒœï¼</span>`;
                    currentPlayerElement.querySelector('.current-player-text').textContent = `${currentPlayer === 'black' ? 'é»‘æ£‹' : 'ç™½æ£‹'} è·èƒœï¼`;
                    return;
                }
                
                // æ£€æŸ¥æ˜¯å¦å¹³å±€
                if (checkDraw()) {
                    gameOver = true;
                    statusElement.innerHTML = '<span style="color: #aaa; font-weight: bold;">æ¸¸æˆç»“æŸï¼Œå¹³å±€ï¼</span>';
                    currentPlayerElement.querySelector('.current-player-text').textContent = 'å¹³å±€ï¼';
                    return;
                }
                
                // åˆ‡æ¢ç©å®¶
                currentPlayer = currentPlayer === 'black' ? 'white' : 'black';
                updateStatus();
            }
            
            // æ£€æŸ¥æ˜¯å¦è·èƒœ
            function checkWin(row, col) {
                const player = board[row][col];
                if (!player) return false;
                
                // æ£€æŸ¥æ–¹å‘ï¼šæ°´å¹³ã€å‚ç›´ã€å¯¹è§’çº¿ï¼ˆå·¦ä¸Šåˆ°å³ä¸‹ï¼‰ã€å¯¹è§’çº¿ï¼ˆå³ä¸Šåˆ°å·¦ä¸‹ï¼‰
                const directions = [
                    [0, 1],  // æ°´å¹³
                    [1, 0],  // å‚ç›´
                    [1, 1],  // å¯¹è§’çº¿ï¼ˆå·¦ä¸Šåˆ°å³ä¸‹ï¼‰
                    [1, -1]  // å¯¹è§’çº¿ï¼ˆå³ä¸Šåˆ°å·¦ä¸‹ï¼‰
                ];
                
                for (const [dx, dy] of directions) {
                    let count = 1; // å½“å‰ä½ç½®å·²ç»æœ‰ä¸€ä¸ªæ£‹å­
                    
                    // æ­£å‘æ£€æŸ¥
                    for (let i = 1; i < 5; i++) {
                        const newRow = row + dx * i;
                        const newCol = col + dy * i;
                        
                        if (
                            newRow >= 0 && newRow < boardSize &&
                            newCol >= 0 && newCol < boardSize &&
                            board[newRow][newCol] === player
                        ) {
                            count++;
                        } else {
                            break;
                        }
                    }
                    
                    // åå‘æ£€æŸ¥
                    for (let i = 1; i < 5; i++) {
                        const newRow = row - dx * i;
                        const newCol = col - dy * i;
                        
                        if (
                            newRow >= 0 && newRow < boardSize &&
                            newCol >= 0 && newCol < boardSize &&
                            board[newRow][newCol] === player
                        ) {
                            count++;
                        } else {
                            break;
                        }
                    }
                    
                    // å¦‚æœæœ‰5ä¸ªæˆ–æ›´å¤šè¿ç»­æ£‹å­ï¼Œåˆ™è·èƒœ
                    if (count >= 5) {
                        return true;
                    }
                }
                
                return false;
            }
            
            // é«˜äº®æ˜¾ç¤ºè·èƒœçš„æ£‹å­
            function highlightWinningPieces() {
                // ç®€åŒ–ç‰ˆæœ¬ï¼šåªæ˜¯ç»™æ‰€æœ‰æ£‹å­æ·»åŠ ä¸€ä¸ªå¾®å¦™çš„åŠ¨ç”»
                const pieces = document.querySelectorAll('.piece');
                pieces.forEach(piece => {
                    piece.classList.add('win-piece');
                });
            }
            
            // æ£€æŸ¥æ˜¯å¦å¹³å±€
            function checkDraw() {
                for (let row = 0; row < boardSize; row++) {
                    for (let col = 0; col < boardSize; col++) {
                        if (board[row][col] === null) {
                            return false; // è¿˜æœ‰ç©ºä½ï¼Œä¸æ˜¯å¹³å±€
                        }
                    }
                }
                return true; // æ£‹ç›˜å·²æ»¡ï¼Œå¹³å±€
            }
            
            // æ‚”æ£‹åŠŸèƒ½
            function undoMove() {
                if (gameOver || moveHistory.length === 0) return;
                
                // è·å–ä¸Šä¸€æ­¥
                const lastMove = moveHistory.pop();
                
                // ä»æ£‹ç›˜ä¸Šç§»é™¤æ£‹å­
                board[lastMove.row][lastMove.col] = null;
                const cell = document.querySelector(`.cell[data-row="${lastMove.row}"][data-col="${lastMove.col}"]`);
                cell.innerHTML = '';
                
                // å¦‚æœæœ‰æ ‡è®°ç‚¹ï¼Œé‡æ–°æ·»åŠ 
                if ((lastMove.row === 3 && lastMove.col === 3) || 
                    (lastMove.row === 3 && lastMove.col === 11) || 
                    (lastMove.row === 7 && lastMove.col === 7) || 
                    (lastMove.row === 11 && lastMove.col === 3) || 
                    (lastMove.row === 11 && lastMove.col === 11)) {
                    cell.classList.add('mark');
                }
                
                // åˆ‡æ¢å›ä¸Šä¸€ä¸ªç©å®¶
                currentPlayer = lastMove.player;
                updateStatus();
            }
            
            // é‡æ–°å¼€å§‹æ¸¸æˆ
            restartBtn.addEventListener('click', initBoard);
            
            // æ‚”æ£‹æŒ‰é’®
            undoBtn.addEventListener('click', undoMove);
            
            // åˆå§‹åŒ–æ¸¸æˆ
            initBoard();
        });
    </script>
</body>
</html>
